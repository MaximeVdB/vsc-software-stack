Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Job stats:
job                       count    min threads    max threads
----------------------  -------  -------------  -------------
integration_prepare           1              1              1
integration_run_python        3              1              1
metrics                       1              1              1
metrics_single                3              1              1
total                         8              1              1

Select jobs to execute...

[Mon Feb 27 14:35:56 2023]
Job 3: 
        Preparing adata
        wildcards: hvg=full_feature,prep=h5ad,scaling=unscaled,scenario=test_data_r4_small
        parameters: batch 0   
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/prepare/unscaled/full_feature/adata_pre.h5ad
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/prepare/unscaled/full_feature/adata_pre.h5ad

[Mon Feb 27 14:36:34 2023]
Finished job 3.
1 of 8 steps (12%) done
Select jobs to execute...

[Mon Feb 27 14:36:34 2023]
Job 5: 
        Run scanorama on unscaled data
        feature selection: full_feature
        dataset: test_data_r4_small
        command: python
        hvgs: 
        cell type option: 
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/scanorama.h5ad
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/scanorama.h5ad; Input files updated by another job: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/prepare/unscaled/full_feature/adata_pre.h5ad

[Mon Feb 27 14:37:22 2023]
Finished job 5.
2 of 8 steps (25%) done
Select jobs to execute...

[Mon Feb 27 14:37:22 2023]
Job 4: 
        Metrics hvg=full_feature,method=scanorama,o_type=embed,scaling=unscaled,scenario=test_data_r4_small
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/scanorama_embed.csv
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/scanorama_embed.csv; Input files updated by another job: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/scanorama.h5ad

[Mon Feb 27 14:38:49 2023]
Error in rule metrics_single:
    jobid: 4
    input: data/adata_norm.h5ad, /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/scanorama.h5ad
    output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/scanorama_embed.csv
    shell:
        
        python scripts/metrics/metrics.py -u data/adata_norm.h5ad -i /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/scanorama.h5ad          -o /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/scanorama_embed.csv -m scanorama          -b batch -l celltype --type embed          --hvgs 0 --organism mouse --assay expression -v
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Select jobs to execute...

[Mon Feb 27 14:38:49 2023]
Job 7: 
        Run bbknn on unscaled data
        feature selection: full_feature
        dataset: test_data_r4_small
        command: python
        hvgs: 
        cell type option: 
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/bbknn.h5ad
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/bbknn.h5ad; Input files updated by another job: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/prepare/unscaled/full_feature/adata_pre.h5ad

[Mon Feb 27 14:39:41 2023]
Finished job 7.
3 of 8 steps (38%) done
Select jobs to execute...

[Mon Feb 27 14:39:41 2023]
Job 6: 
        Metrics hvg=full_feature,method=bbknn,o_type=knn,scaling=unscaled,scenario=test_data_r4_small
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/bbknn_knn.csv
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/bbknn_knn.csv; Input files updated by another job: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/bbknn.h5ad

[Mon Feb 27 14:40:32 2023]
Error in rule metrics_single:
    jobid: 6
    input: data/adata_norm.h5ad, /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/bbknn.h5ad
    output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/bbknn_knn.csv
    shell:
        
        python scripts/metrics/metrics.py -u data/adata_norm.h5ad -i /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/bbknn.h5ad          -o /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/bbknn_knn.csv -m bbknn          -b batch -l celltype --type knn          --hvgs 0 --organism mouse --assay expression -v
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Select jobs to execute...

[Mon Feb 27 14:40:32 2023]
Job 2: 
        Run combat on unscaled data
        feature selection: full_feature
        dataset: test_data_r4_small
        command: python
        hvgs: 
        cell type option: 
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/combat.h5ad
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/combat.h5ad; Input files updated by another job: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/prepare/unscaled/full_feature/adata_pre.h5ad

[Mon Feb 27 14:41:10 2023]
Finished job 2.
4 of 8 steps (50%) done
Select jobs to execute...

[Mon Feb 27 14:41:10 2023]
Job 1: 
        Metrics hvg=full_feature,method=combat,o_type=full,scaling=unscaled,scenario=test_data_r4_small
        output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/combat_full.csv
        
Reason: Missing output files: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/combat_full.csv; Input files updated by another job: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/combat.h5ad

[Mon Feb 27 14:42:18 2023]
Error in rule metrics_single:
    jobid: 1
    input: data/adata_norm.h5ad, /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/combat.h5ad
    output: /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/combat_full.csv
    shell:
        
        python scripts/metrics/metrics.py -u data/adata_norm.h5ad -i /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/integration/unscaled/full_feature/combat.h5ad          -o /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL8/haswell-ib/software/scib-pipeline/20221014-foss-2022a/pipeline/data/scib-R4.0_small/test_data_r4_small/metrics/unscaled/full_feature/combat_full.csv -m combat          -b batch -l celltype --type full          --hvgs 0 --organism mouse --assay expression -v
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2023-02-27T143552.799826.snakemake.log
