diff -ruN qt-everywhere-src-5.11.1.orig/qtbase/src/corelib/global/qconfig-bootstrapped.h qt-everywhere-src-5.11.1.new/qtbase/src/corelib/global/qconfig-bootstrapped.h
--- qt-everywhere-src-5.11.1.orig/qtbase/src/corelib/global/qconfig-bootstrapped.h	2023-06-01 14:26:15.962414000 +0200
+++ qt-everywhere-src-5.11.1.new/qtbase/src/corelib/global/qconfig-bootstrapped.h	2023-06-01 14:56:47.321466000 +0200
@@ -98,10 +98,18 @@
 #define QT_NO_QOBJECT
 #define QT_FEATURE_process -1
 #define QT_FEATURE_regularexpression -1
-#define QT_FEATURE_renameat2 -1
+#ifdef __GLIBC_PREREQ
+# define QT_FEATURE_renameat2 (__GLIBC_PREREQ(2, 28) ? 1 : -1)
+#else
+# define QT_FEATURE_renameat2 -1
+#endif
 #define QT_FEATURE_sharedmemory -1
 #define QT_FEATURE_slog2 -1
-#define QT_FEATURE_statx -1
+#ifdef __GLIBC_PREREQ
+# define QT_FEATURE_statx (__GLIBC_PREREQ(2, 28) ? 1 : -1)
+#else
+# define QT_FEATURE_statx -1
+#endif
 #define QT_FEATURE_syslog -1
 #define QT_NO_SYSTEMLOCALE
 #define QT_FEATURE_systemsemaphore -1
diff -ruN qt-everywhere-src-5.11.1.orig/qtbase/src/corelib/io/qfilesystemengine_unix.cpp qt-everywhere-src-5.11.1.new/qtbase/src/corelib/io/qfilesystemengine_unix.cpp
--- qt-everywhere-src-5.11.1.orig/qtbase/src/corelib/io/qfilesystemengine_unix.cpp	2023-06-01 14:53:16.498298000 +0200
+++ qt-everywhere-src-5.11.1.new/qtbase/src/corelib/io/qfilesystemengine_unix.cpp	2023-06-01 14:55:26.201100000 +0200
@@ -91,7 +91,6 @@
 #  include <sys/syscall.h>
 #  include <sys/sendfile.h>
 #  include <linux/fs.h>
-#  include <linux/stat.h>
 
 // in case linux/fs.h is too old and doesn't define it:
 #ifndef FICLONE
@@ -112,6 +111,7 @@
 #    endif
 
 #    if !QT_CONFIG(statx) && defined(SYS_statx)
+#      include <linux/stat.h>
 static int statx(int dirfd, const char *pathname, int flag, unsigned mask, struct statx *statxbuf)
 { return syscall(SYS_statx, dirfd, pathname, flag, mask, statxbuf); }
 #    elif !QT_CONFIG(statx) && !defined(SYS_statx)
