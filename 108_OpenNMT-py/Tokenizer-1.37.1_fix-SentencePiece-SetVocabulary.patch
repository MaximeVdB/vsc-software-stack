fix for: "error: cannot convert const std::vector<std::__cxx11::basic_string<char> > to const std::vector<std::basic_string_view<char> >&"
author: Lars Viklund (UmeÃ¥ University)
diff -ruN Tokenizer-1.37.1.orig/src/SentencePiece.cc Tokenizer-1.37.1/src/SentencePiece.cc
--- Tokenizer-1.37.1.orig/src/SentencePiece.cc	2023-03-01 12:01:24.000000000 +0100
+++ Tokenizer-1.37.1/src/SentencePiece.cc	2023-03-14 19:50:30.364735919 +0100
@@ -54,7 +54,12 @@
     if (options && (options->joiner_annotate || options->spacer_new))
       throw std::invalid_argument("SentencePiece vocabulary restriction requires the tokenization "
                                   "to use \"spacer_annotate\" (same as spm_encode)");
-    auto status = _processor->SetVocabulary(vocabulary);
+    std::vector<absl::string_view> vocabulary_views;
+    vocabulary_views.reserve(vocabulary.size());
+    for (auto &elem : vocabulary) {
+      vocabulary_views.push_back(elem);
+    }
+    auto status = _processor->SetVocabulary(vocabulary_views);
     if (!status.ok())
       throw std::invalid_argument(status.ToString());
   }
